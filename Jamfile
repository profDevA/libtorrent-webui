import modules ;

BOOST_ROOT = [ modules.peek : BOOST_ROOT ] ;

use-project /torrent : ../libtorrent_aio ;

if $(BOOST_ROOT)
{
	use-project /boost : $(BOOST_ROOT) ;
}

SOURCES =
	webui
	transmission_webui
	utorrent_webui
	json_util
	file_downloader
	torrent_post
	rencode
	deluge
	disk_space
	base64
	escape_json
	auto_load
	save_settings
	save_resume
	torrent_history
	auth
	no_auth
	pam_auth
	auth_localhost
	load_config
	http_whitelist
	;

lib torrent-webui
	: # sources
	src/$(SOURCES).cpp src/mongoose.c src/jsmn.c src/cdecode.c

	: # requirements
	<library>/torrent//torrent
	<library>zlib
	<library>pam

	: # default build
	<link>static

	: # usage-requirements
	<include>src
	<target-os>linux:<library>pthread
	<target-os>linux:<library>rt
	;

lib zlib : : <name>z <search>/usr/local/lib ;
lib pthread : : <name>pthread <search>/usr/local/lib <link>shared ;
lib rt : : <name>rt <search>/usr/local/lib <link>shared ;
lib pam : : <name>pam <search>/usr/local/lib ;

exe webui_test : test.cpp : <library>torrent-webui <library>/torrent//torrent ;

